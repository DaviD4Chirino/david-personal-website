---
export const prerender = true;
import type { GetStaticPaths } from "astro";
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Blog from "../../components/pages/Blog";

const posts = await getCollection("posts");

export const getStaticPaths = (async ({ paginate }) => {
  const _posts: CollectionEntry<"posts">[] = await getCollection("posts");
  return paginate(_posts, { pageSize: 10 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;

// TODO: ADD SEARCH AND ORDER_BY FILTERS
// IDEA: USE A FORM ELEMENT
//IDEA: MAKE THIS IN REACT
---

<Layout title="Blogs - David'Space">
  <!-- @ts-ignore-->
  <Blog page={page} totalPosts={posts} client:load />
</Layout>
